# Recommendation algorithm

추천 알고리즘은 크게 3가지로 분류

1. Contents Based (CB)
2. Collaborative Filtering (CF)
3. Latent Factorization (LF)

쉽게 이야기하면 CB는 수작업, CF는 벡터 맞추기, LF는 데이터 가공해서 맞추기라고 한다.

## Contents Based (CB)

옷을 사러 매장에 갔을 때, 디자인은 마음에 들지만 색상이 마음에 들지 않는 옷을 발견했다면, 직원에게 물어볼 것이다.

**같은 디자인의 다른 색상 옷이 있는지.**

직원분은 바코드를 찍어 화면에 뜬 내용을 통해 다른 색상의 옷의 재고 여부를 찾아 줄 것이다.

바코드 정보

- 출시년도, 사이즈, 색상, 디자인 코드, 길이, 너비, 재고수량, 보유 지점 등

과 같은 정보에서 색상만 다르게 조건 검색해서 재고 여부를 살펴볼 수 있다.

→ 카테고리 기반의 추천 방식

→ 국내의 거의 모든 추천 알고리즘

### 단점

데이터가 많아질 경우 속도가 엄청나게 느려진다.

- DB 효율화에 엄청난 비용 발생
- 카테고리 수작업에 인건비가 너무 많이 든다.

→ DB를 잘 설계하는 것이 중요

## Collaborative Filtering (CF)

CB의 치명적인 단점 보완

**사용자 기반으로 볼 때, A 사용자가 1,2,3 상품을 보고 4번 상품을 구매했는데, B 사용자가 똑같이 1,2번 상품을 보고 있으면 3,4번 상품을 추천해주는 방식**

수학적으로는

사용자별 데이터를 Vector로 정리해서 Vector간 유사성을 계산하는 작업

😟하기 힘든 가장 큰 이유

데이터를 Flow형태로 바꿔야되기 때문

CB에서는 사용자들의 데이터 로그를 쌓아야할 필요가 전혀 없다. 단순히 상품 카테고리만 잘 나누면 된다.

근데, CF를 하려면 사용자들이 뭘 했는지 로그를 남겨놓고, 그 로그를 1,2,3,4 상품을 보고갔다는 형태의 Flow 데이터로 전환시켜야 한다.

데이터 저장 방식을 어떻게 해야할지, 누구는 2개 보고, 누구는 60개 찍고 갔는데 이걸 어떻게 **전처리**해야 Vector간 유사성을 계산할 수 있는지 고민하며 DB를 만들어야한다.

CF는 DB로 끝나는게 아니라, 저렇게 비슷한 Vector들을 어떤 계산을 이용해서 맞춰주느냐에 대한 고민도 해야한다. 

그리고 그전에 엄청난 고민을 담은 데이터 전처리를 해야 한다.  가짜 클릭, 오류 클릭 같은 숫자를 제거하는 작업이 하나의 예시일텐데, 일반 유저에게 가장 쉽게 다가오는 예시로 보통 컨닝한 학생의 시험점수를 걸러내고 학교 전체 성적 평균을 계산하는 예시를 든다.

### 단점

이상한 데이터가 잔뜩 들어가 있으면 모델 자체가 꼬이고 데이터 전처리, 통계 모델 업그레이드 작업이 장기간 소요된다.

데이터가 아예 없을 때는 결국 CB로 추천해 줄 수 밖에 없다.

- CB보다 DB 설계가 복잡하다.
- 데이터 전처리에 수학이 너무 많이 들어간다.
- 모델링에 수리통계학이 너무 많이 들어간다.

## 진화된 추천 알고리즘 - Latent Factorization (LF)

Netflix에서 사용하는 알고리즘의 외부에 알려진 명칭은 Latent Matrix Factorization (LMF) 다. 영화 감상하는 유저들의 행동 패턴 데이터를 그대로 쓰는 게 아니라, 그 데이터에서 Factor를 추출해낸 값으로 영화 추천을 하겠다는 것이다.

데이터는 CF모델에서 쓴 데이터를 쓰는데, 적절한 계산을 통해 숨겨진 변수가 들어간 형태로 행렬을 분리하는 작업이 계산 작업의 핵심

LF를 이용하면, 영화별 카테고리를 알 필요도 없고, 비슷한 다른 유저를 찾으려고 노력할 필요도 없다. LF에서 Latent factor간 영화 속에 숨겨진 변수를 말하는데, 스칼렛 요한슨이 나온 영화를 좋아하는 건지, 로맨스가 강조되는 영화를 좋아하는 건지 그 유저의 행동패턴을 통해서 추측해내는 계산을 말한다.

### 단점

데이터가 대규모 데이터가 아니면 의미가 없다.

참고문헌 : [https://pdsi.pabii.com/recommendation-algorithm-cb-cf-lf/](https://pdsi.pabii.com/recommendation-algorithm-cb-cf-lf/)